<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–≥—Ä–∞ –ø—Ä–æ —Ñ–µ—Ä–º—É: –í—ã—Ä–∞—â–∏–≤–∞–Ω–∏–µ –ø—à–µ–Ω–∏—Ü—ã</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0e5d7;
            color: #333;
            margin: 0;
            padding: 20px;
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        #main-menu {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .btn {
            padding: 10px 20px;
            margin: 5px;
            background-color: #5cb85c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #4cae4c;
        }

        #gameContainer,
        #fieldContainer {
            display: none;
            border: 2px solid #8b5a2b;
            border-radius: 10px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            font-weight: bold;
            position: relative;
        }

        #field {
            display: grid;
            grid-template-columns: repeat(10, 30px); /* 10 –∫–æ–ª–æ–Ω–æ–∫ */
            gap: 2px; /* –ü—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É –∫–≤–∞–¥—Ä–∞—Ç–∞–º–∏ */
        }

        .square {
            width: 30px;
            height: 30px;
            border: 1px solid #8b5a2b;
            display: inline-block;
            background-color: #d1b353; /* –ö–æ—Ä–∏—á–Ω–µ–≤–∞—è –∑–µ–º–ª—è */
            position: relative;
        }

        .planted {
            background-color: #c4d600; /* –¶–≤–µ—Ç –¥–ª—è –ø–æ—Å–∞–∂–µ–Ω–Ω–æ–π –ø—à–µ–Ω–∏—Ü—ã */
            position: relative;
        }

        .tilled {
            background-color: #8b4513; /* –¢–µ–º–Ω–æ-–∫–æ—Ä–∏—á–Ω–µ–≤–∞—è –¥–ª—è –≤—Å–ø–∞—Ö–∞–Ω–Ω–æ–π –∑–µ–º–ª–∏ */
        }

        .crop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            font-size: 20px; /* –†–∞–∑–º–µ—Ä —ç–º–æ–¥–∑–∏ –ø—à–µ–Ω–∏—Ü—ã */
            line-height: 30px; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–æ–¥–∑–∏ –≤ –∫–≤–∞–¥—Ä–∞—Ç–µ */
            text-align: center;
        }

        .field-info {
            margin-top: 10px;
        }

        #timer {
            font-size: 1.2rem;
            color: #ff4500; /* –¶–≤–µ—Ç –¥–ª—è —Ç–∞–π–º–µ—Ä–∞ */
            margin-top: 10px;
        }

        #yearDisplay {
            margin: 10px 0;
        }

    </style>
</head>

<body>
    <h1>–§–µ—Ä–º–∞: –í—ã—Ä–∞—â–∏–≤–∞–Ω–∏–µ –ø—à–µ–Ω–∏—Ü—ã üåæ</h1>
    <div id="main-menu">
        <button class="btn" id="playButton">–ò–≥—Ä–∞—Ç—å</button>
        <button class="btn" id="recordButton">–†–µ–∫–æ—Ä–¥–Ω—ã–π —É—Ä–æ–∂–∞–π</button>
    </div>

    <div id="gameContainer">
        <h2>–ë–∞–ª–∞–Ω—Å: <span id="balance">0</span> —Ä—É–±.</h2>
        <h3 id="yearDisplay">–ì–æ–¥: <span id="year">1</span></h3>
        <button class="btn" id="takeLoan">–í–∑—è—Ç—å –∫—Ä–µ–¥–∏—Ç –Ω–∞ 1000 —Ä—É–±–ª–µ–π</button>
        <div id="fieldControls" style="display: none;">
            <button class="btn" id="rentLand">–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å –∑–µ–º–ª—é (500 —Ä—É–±–ª–µ–π / 1000 –º¬≤)</button>
            <div id="areaSelection" style="display: none;">
                <input type="number" id="landArea" placeholder="–ö–æ–ª-–≤–æ –º¬≤" />
                <button class="btn" id="confirmRent">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞—Ä–µ–Ω–¥—É</button>
            </div>
            <button class="btn" id="openField">–ü–æ–ª–µ</button>
        </div>
    </div>

    <div id="fieldContainer">
        <h2>–í–∞—à–µ –ø–æ–ª–µ</h2>
        <div id="field"></div>
        <div class="field-info">–ê—Ä–µ–Ω–¥–æ–≤–∞–Ω–æ: <span id="rentedArea">0</span> –º¬≤</div>
        <div class="field-info">
            <button class="btn" id="plantSeeds">–ö—É–ø–∏—Ç—å —Å–µ–º–µ–Ω–∞ (25 —Ä—É–±./–∫–≥)</button>
            <input type="number" id="seedsAmount" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ (–∫–≥)" />
            <button class="btn" id="harvest">–°–æ–±—Ä–∞—Ç—å —É—Ä–æ–∂–∞–π</button>
            <button class="btn" id="plowField">–í—Å–ø–∞—Ö–∞—Ç—å –ø–æ–ª–µ (250 —Ä—É–±.)</button>
            <button class="btn" id="sellHarvest">–ü—Ä–æ–¥–∞–∂–∞ –ø—à–µ–Ω–∏—Ü—ã</button>
        </div>
        <div id="timer"></div>
    </div>

    <script>
        let balance = 0;
        let loan = 0;
        let rentedArea = 0;
        let plantedArea = 0;
        let harvestReady = false;
        let cropYield = 0; // —É—Ä–æ–∂–∞–π –≤ –∫–≥
        let harvestAmount = 0; // —Å–∫–æ–ª—å–∫–æ —Å–æ–±—Ä–∞–Ω–æ
        let highestYield = 0;
        let year = 1;

        document.getElementById('playButton').addEventListener('click', () => {
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'block';
        });

        document.getElementById('recordButton').addEventListener('click', () => {
            alert(`–°–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–∂–∞–π: ${highestYield} –∫–≥`);
        });

        document.getElementById('takeLoan').addEventListener('click', () => {
            balance += 1000;
            loan = 1000;
            alert("–í—ã –≤–∑—è–ª–∏ –∫—Ä–µ–¥–∏—Ç –Ω–∞ 1000 —Ä—É–±–ª–µ–π –ø–æ–¥ 30% –≥–æ–¥–æ–≤—ã—Ö.");
            updateBalance();
            showRentControls();
        });

        function showRentControls() {
            document.getElementById('fieldControls').style.display = 'block';
        }

        document.getElementById('rentLand').addEventListener('click', () => {
            document.getElementById('areaSelection').style.display = 'block';
        });

        document.getElementById('confirmRent').addEventListener('click', () => {
            const area = parseInt(document.getElementById('landArea').value) || 0;
            if (balance >= 500 * (area / 1000)) {
                balance -= 500 * (area / 1000);
                rentedArea += area;
                alert(`–ê—Ä–µ–Ω–¥–æ–≤–∞–Ω–æ ${area} –º¬≤ –ø–æ–ª—è.`);
                document.getElementById('rentedArea').innerText = rentedArea;
                updateBalance();
                drawField();
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –∞—Ä–µ–Ω–¥—ã —ç—Ç–æ–π –ø–ª–æ—â–∞–¥–∏.");
            }
        });

        document.getElementById('openField').addEventListener('click', () => {
            document.getElementById('fieldContainer').style.display = 'block';
        });

        document.getElementById('plantSeeds').addEventListener('click', () => {
            const seedsCost = 25; // —Ü–µ–Ω–∞ –∑–∞ –∫–≥
            const seedsToPlant = parseInt(document.getElementById('seedsAmount').value) || 0;
            const areaToPlant = seedsToPlant * 250; // 1 –∫–≥ —Å–µ–º—è–Ω –Ω–∞ 250 –º¬≤

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –¥–ª—è –∑–∞—Å–µ–≤–∞
            if (seedsToPlant > 0 && balance >= seedsCost * seedsToPlant && plantedArea + areaToPlant <= rentedArea) {
                balance -= seedsCost * seedsToPlant;
                updateBalance();
                alert(`–í—ã –ø–æ—Å–µ—è–ª–∏ –ø—à–µ–Ω–∏—Ü—É –Ω–∞ ${areaToPlant} –º¬≤.`);

                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∑–∞—Å–µ—è–Ω–Ω—ã–µ –∫–≤–∞–¥—Ä–∞—Ç—ã
                for (let i = plantedArea; i < plantedArea + areaToPlant; i++) {
                    const square = document.querySelectorAll('.square')[i];
                    square.classList.add('planted');
                    const cropEmoji = document.createElement('div');
                    cropEmoji.className = 'crop';
                    cropEmoji.innerText = 'üåæ'; // –≠–º–æ–¥–∑–∏ –¥–ª—è –ø—à–µ–Ω–∏—Ü—ã
                    square.appendChild(cropEmoji);
                }

                plantedArea += areaToPlant;

                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –Ω–∞ —Å–æ–∑—Ä–µ–≤–∞–Ω–∏–µ
                let timeLeft = 30; // –í—Ä–µ–º—è –¥–æ —Å–æ–∑—Ä–µ–≤–∞–Ω–∏—è
                document.getElementById("timer").innerText = `–£—Ä–æ–∂–∞–π —Å–æ–∑—Ä–µ–µ—Ç —á–µ—Ä–µ–∑ ${timeLeft} —Å–µ–∫—É–Ω–¥.`;
                const timerInterval = setInterval(() => {
                    timeLeft--;
                    document.getElementById("timer").innerText = `–£—Ä–æ–∂–∞–π —Å–æ–∑—Ä–µ–µ—Ç —á–µ—Ä–µ–∑ ${timeLeft} —Å–µ–∫—É–Ω–¥.`;
                    if (timeLeft <= 0) {
                        clearInterval(timerInterval);
                        markFieldAsReady(); // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –ø–æ–ª—è –Ω–∞ –æ—Ä–∞–Ω–∂–µ–≤—ã–π
                    }
                }, 1000);

                // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –Ω–∞ –æ—Ä–∞–Ω–∂–µ–≤—ã–π —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    markFieldAsReady();
                }, 30000); // –ß–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥ —É—Ä–æ–∂–∞–π –≥–æ—Ç–æ–≤
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –∏–ª–∏ –∑–µ–º–ª–∏ –¥–ª—è –ø–æ—Å–∞–¥–∫–∏.");
            }
        });

        function markFieldAsReady() {
            document.querySelectorAll('.square').forEach(square => {
                if (square.classList.contains('planted')) {
                    square.style.backgroundColor = "#ffa500"; // –û—Ä–∞–Ω–∂–µ–≤—ã–π —Ü–≤–µ—Ç –¥–ª—è —Å–æ–∑—Ä–µ–≤—à–µ–π –ø—à–µ–Ω–∏—Ü—ã
                }
            });

            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —É—Ä–æ–∂–∞–π
            const baseYield = Math.floor(plantedArea / 100); // –∫–≥ –∑–∞ 100 –º¬≤
            cropYield = (document.querySelector('.tilled') ? baseYield * 5 : baseYield * 3); // –ï—Å–ª–∏ –≤—Å–ø–∞—Ö–∞–Ω–æ, —Ç–æ –Ω–∞ 50% –±–æ–ª—å—à–µ
            harvestReady = true;
            alert("–ü—à–µ–Ω–∏—Ü–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Å–±–æ—Ä—É!");
        }

        document.getElementById('harvest').addEventListener('click', () => {
            if (harvestReady) {
                harvestAmount = Math.floor(cropYield); // –£—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ
                balance += harvestAmount * (Math.floor(Math.random() * (14 - 10 + 1)) + 10); // –¶–µ–Ω–∞ –æ—Ç 10 –¥–æ 14 —Ä—É–±–ª–µ–π
                highestYield = Math.max(highestYield, harvestAmount); // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–æ—Ä–¥–∞
                alert(`–í—ã —Å–æ–±—Ä–∞–ª–∏ ${harvestAmount} –∫–≥ –ø—à–µ–Ω–∏—Ü—ã!`);
                updateBalance();
                resetField();
            } else {
                alert("–£—Ä–æ–∂–∞–π –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤.");
            }
        });

        document.getElementById('sellHarvest').addEventListener('click', () => {
            if (harvestAmount > 0) {
                balance += harvestAmount * (Math.floor(Math.random() * (14 - 10 + 1)) + 10);
                highestYield = Math.max(highestYield, harvestAmount); // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∫–æ—Ä–¥–∞
                alert(`–í—ã –ø—Ä–æ–¥–∞–ª–∏ ${harvestAmount} –∫–≥ –ø—à–µ–Ω–∏—Ü—ã!`);
                updateBalance();
                resetField();
            } else {
                alert("–°–Ω–∞—á–∞–ª–∞ —Å–æ–±–µ—Ä–∏—Ç–µ —É—Ä–æ–∂–∞–π.");
            }
        });

        document.getElementById('plowField').addEventListener('click', () => {
            if (balance >= 250) { // –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤—Å–ø–∞—à–∏–≤–∞–Ω–∏—è
                balance -= 250;
                updateBalance();
                alert("–ü–æ–ª–µ –≤—Å–ø–∞—Ö–∞–Ω–æ, —à–∞–Ω—Å—ã –Ω–∞ —É—Ä–æ–∂–∞–π —É–≤–µ–ª–∏—á–µ–Ω—ã!");
            } else {
                alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –≤—Å–ø–∞—à–∫–∏.");
            }
        });

        function resetField() {
            plantedArea = 0;
            harvestReady = false;
            cropYield = 0; // –°–±—Ä–æ—Å —É—Ä–æ–∂–∞—è
            document.querySelectorAll('.square').forEach(square => {
                square.classList.remove('planted');
                const cropEmoji = square.querySelector('.crop');
                if (cropEmoji) {
                    cropEmoji.remove(); // –£–¥–∞–ª—è–µ–º —ç–º–æ–¥–∑–∏ –ø—à–µ–Ω–∏—Ü—ã
                }
                square.style.backgroundColor = "#d1b353"; // –í–µ—Ä–Ω—É—Ç—å —Ü–≤–µ—Ç –∑–µ–º–ª–∏
            });
            document.getElementById("timer").innerText = ""; // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞
        }

        function drawField() {
            const field = document.getElementById('field');
            field.innerHTML = ''; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –ø–µ—Ä–µ–¥ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ–º
            
            for (let i = 0; i < (rentedArea / 10); i++) { // 10 –º¬≤ = 1 –∫–≤–∞–¥—Ä–∞—Ç
                const square = document.createElement('div');
                square.className = 'square';
                field.appendChild(square);
            }
        }

        function updateBalance() {
            document.getElementById('balance').innerText = balance;
            document.getElementById('year').innerText = year;
        }

        function updateFieldInfo(plantedCount) {
            alert(`${plantedCount} –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –∑–∞—Å–µ—è–Ω–æ.`); // –°–æ–æ–±—â–∞–µ–º —Å–∫–æ–ª—å–∫–æ –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ –∑–∞—Å–µ—è–Ω–æ
        }
    </script>
</body>

</html>
